/*!
 * Flexible Nav - 2011 - by @greweb
 */
(function(e){var b=0;var c=function(){return ++b};var a=function(f){var h=e('<nav class="flexible-nav"><ul></ul></nav>');var g=e.map(f,function(i){return e('<li><a href="'+i.href+'">'+i.text+"</a></li>")[0]});h.find("ul").append(g);return h};var d=function(g){var f=e(g).attr("href");if(f.substring(0,1)=="#"){var h=e(f);return h.size()?h:null}return null};window.FlexibleNavMaker=function(f){var g=this;g.nodes=e(f||"h1,h2,h3");g.make=function(){var h=g.nodes.map(function(){var i=e(this);var j=i.attr("id");if(!j){while(!j){j="n"+(c());if(e("#"+j).size()>0){j=null}}i.attr("id",j)}return{href:"#"+j,text:i.attr("data-navtext")||i.text()}});return a(h)}};window.FlexibleNav=function(g){var f=this;f.nav=e(g);f.updateClasses=function(){f.nav.find("a").each(function(){var h=e(this);var i=d(h);if(i){h.addClass("tnn-"+i[0].nodeName.toLowerCase())}})};f.update=function(){var h=e("body").height();var i=e("window").height();f.nav.find("a").each(function(){var k=e(this);var l=d(k);if(l){var j=100*l.offset().top/h;k.css("top",j+"%");if(l.is(":visible")){k.show()}else{k.hide()}}})};e(window).resize(function(){f.update()});f.updateClasses();f.update()}}(jQuery));