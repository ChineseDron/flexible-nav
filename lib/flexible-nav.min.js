(function(){var b=0;var c=function(){return ++b};var a=function(e){var g=$('<nav class="flexible-nav"><ul></ul></nav>');var f=$.map(e,function(h){return $('<li><a href="'+h.href+'">'+h.text+"</a></li>")[0]});g.find("ul").append(f);return g};var d=function(f){var e=$(f).attr("href");if(e.substring(0,1)=="#"){var g=$(e);return g.size()?g:null}return null};window.FlexibleNavMaker=function(e){var f=this;f.nodes=$(e||"h1,h2,h3");f.make=function(){var g=f.nodes.map(function(){var h=$(this);var i=h.attr("id");if(!i){while(!i){i="n"+(c());if($("#"+i).size()>0){i=null}}h.attr("id",i)}return{href:"#"+i,text:h.attr("data-navtext")||h.text()}});return a(g)}};window.FlexibleNav=function(f){var e=this;e.nav=$(f);e.updateClasses=function(){e.nav.find("a").each(function(){var g=$(this);var h=d(g);if(h){g.addClass("tnn-"+h[0].nodeName.toLowerCase())}})};e.update=function(){var g=$("body").height();var h=$("window").height();e.nav.find("a").each(function(){var j=$(this);var k=d(j);if(k){var i=100*k.offset().top/g;j.css("top",i+"%")}})};$(window).resize(function(){e.update()});e.updateClasses();e.update()}}());